(this.webpackJsonpcloud_dashboard=this.webpackJsonpcloud_dashboard||[]).push([[0],{35:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),c=t(19),r=t.n(c),o=t(8),m=t(9),i=t(3),s="cloud_dashboard",d="/clouds/dashboard",u=[{cloudServiceProvider:"aws_cloud",labelName:"Instance",entityName:"instance",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Public IP",name:"public_ip",type:"default"},{labelName:"Instance State",name:"instance_state",type:"default"},{labelName:"Instance Type",name:"instance_type",type:"default"},{labelName:"Availability Zone",name:"availability_zone",type:"default"},{labelName:"Cost",name:"cost",type:"cost"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Image",entityName:"image",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"AMI Name",name:"ami_name",type:"default"},{labelName:"AMI ID",name:"image_id",type:"default"},{labelName:"Status",name:"status",type:"default"},{labelName:"Source",name:"source",type:"default"},{labelName:"Root Device Type",name:"root_device_type",type:"default"},{labelName:"Visibility",name:"visibility",type:"boolean",value:["Public","Private"]},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Security Group",entityName:"security_group",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Group ID",name:"group_id",type:"default"},{labelName:"VPC",name:"vpc_id",type:"join",info:{entityTypeId:"aws_cloud_vpc",keyColumn:"vpc_id",valueColumn:"name"}}]},{cloudServiceProvider:"aws_cloud",labelName:"Elastic IP",entityName:"elastic_ip",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Allocation ID",name:"allocation_id",type:"default"},{labelName:"Type",name:"elastic_ip_type",type:"default"},{labelName:"Elastic IP",name:"public_ip",type:"default"},{labelName:"Instance ID",name:"instance_id",type:"join",info:{entityTypeId:"aws_cloud_instance",keyColumn:"instance_id",valueColumn:"name"}},{labelName:"Private IP Address",name:"private_ip_address",type:"default"},{labelName:"Scope",name:"scope",type:"default"}]},{cloudServiceProvider:"aws_cloud",labelName:"Key Pair",entityName:"key_pair",entityColumn:[{labelName:"Key Pair Name",name:"key_pair_name",type:"default"},{labelName:"Key Fingerprint",name:"key_fingerprint",type:"default"}]},{cloudServiceProvider:"aws_cloud",labelName:"Volume",entityName:"volume",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Volume ID",name:"volume_id",type:"default"},{labelName:"IOPS",name:"iops",type:"default"},{labelName:"Size",name:"size",type:"default"},{labelName:"Availability Zone",name:"availability_zone",type:"default"},{labelName:"Volume Type",name:"volume_type",type:"default"},{labelName:"Attachment Information",name:"attachment_information",type:"join",info:{entityTypeId:"aws_cloud_instance",keyColumn:"instance_id",valueColumn:"name"}},{labelName:"State",name:"state",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Snapshot",entityName:"snapshot",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Snapshot ID",name:"snapshot_id",type:"default"},{labelName:"Encrypted",name:"encrypted",type:"default"},{labelName:"Size",name:"size",type:"default"},{labelName:"Status",name:"status",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Network Interface",entityName:"network_interface",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Subnet",name:"subnet_id",type:"join",info:{entityTypeId:"aws_cloud_subnet",keyColumn:"subnet_id",valueColumn:"name"}},{labelName:"VPC",name:"vpc_id",type:"join",info:{entityTypeId:"aws_cloud_vpc",keyColumn:"vpc_id",valueColumn:"name"}},{labelName:"Status",name:"status",type:"default"},{labelName:"Security Groups",name:"security_groups",type:"default"},{labelName:"Primary Private IP",name:"primary_private_ip",type:"default"},{labelName:"Secondary Private IPs",name:"secondary_private_ips",type:"default"}]},{cloudServiceProvider:"aws_cloud",labelName:"VPC",entityName:"vpc",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"VPC",name:"vpc_id",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"IPv4 CIDR",name:"cidr_block",type:"default"},{labelName:"IPv6 CIDR",name:"ipv6_cidr_blocks",type:"array"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Subnet",entityName:"subnet",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Subnet ID",name:"subnet_id",type:"default"},{labelName:"VPC",name:"vpc_id",type:"join",info:{entityTypeId:"aws_cloud_vpc",keyColumn:"vpc_id",valueColumn:"name"}},{labelName:"IPv4 CIDR",name:"cidr_block",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"Region Name",name:"region_name",type:"default"},{labelName:"Zone Name",name:"zone_name",type:"default"},{labelName:"Network Border Group",name:"network_border_group",type:"default"},{labelName:"Zone Type",name:"zone_type",type:"default"},{labelName:"Parent Zone Type",name:"parent_zone_type",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"VPC Peering Connection",entityName:"vpc_peering_connection",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"VPC Peering Connection ID",name:"vpc_peering_connection_id",type:"default"},{labelName:"Status",name:"status_code",type:"default"},{labelName:"Requester VPC",name:"requester_vpc_id",type:"join",info:{entityTypeId:"aws_cloud_vpc",keyColumn:"vpc_id",valueColumn:"name"}},{labelName:"Accepter VPC",name:"accepter_vpc_id",type:"join",info:{entityTypeId:"aws_cloud_vpc",keyColumn:"vpc_id",valueColumn:"name"}},{labelName:"Requester CIDR Blocks",name:"requester_cidr_block",type:"default"},{labelName:"Accepter CIDR Blocks",name:"accepter_cidr_block",type:"default"},{labelName:"Requester AWS Account",name:"requester_account_id",type:"default"},{labelName:"Accepter AWS Account",name:"accepter_account_id",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"aws_cloud",labelName:"Internet Gateway",entityName:"internet_gateway",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Internet Gateway ID",name:"internet_gateway_id",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"VPC ID",name:"vpc_id",type:"default"},{labelName:"Created",name:"created",type:"default"}]},{cloudServiceProvider:"aws_cloud",labelName:"Career Gateway",entityName:"career_gateway",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Carrier Gateway ID",name:"carrier_gateway_id",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"VPC ID",name:"vpc_id",type:"default"},{labelName:"Created",name:"created",type:"default"}]},{cloudServiceProvider:"aws_cloud",labelName:"Transit Gateway",entityName:"transit_gateway",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Transit Gateway ID",name:"transit_gateway_id",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"Amazon Account ID",name:"account_id",type:"default"},{labelName:"Created",name:"created",type:"default"}]}],p=[{cloudServiceProvider:"k8s",labelName:"Node",entityName:"node",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"CPU (Request)",name:"cpu_request",type:"default"},{labelName:"CPU (Limit)",name:"cpu_limit",type:"default"},{labelName:"CPU (Usage)",name:"cpu_usage",type:"default"},{labelName:"Memory (Request)",name:"memory_request",type:"memory"},{labelName:"Memory (Limit)",name:"memory_limit",type:"memory"},{labelName:"Memory (Usage)",name:"memory_usage",type:"memory"},{labelName:"Pods (Applcation)",name:"pods_allocation",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Namespace",entityName:"namespace",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Deployment",entityName:"deployment",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Pod",entityName:"pod",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Node",name:"node_name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"Restarts",name:"restarts",type:"default"},{labelName:"CPU (Usage)",name:"cpu_usage",type:"default"},{labelName:"Memory (Usage)",name:"memory_usage",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"ReplicaSet",entityName:"replica_set",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Replica",name:"replicas",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"CronJob",entityName:"cron_job",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Schedule",name:"schedule",type:"default"},{labelName:"Suspend",name:"suspend",type:"default"},{labelName:"Active",name:"active",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Job",entityName:"job",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Image",name:"image",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Service",entityName:"service",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Cluster IP",name:"cluster_ip",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Network Policy",entityName:"network_policy",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Resource Quotas",entityName:"resource_quota",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"LimitRange",entityName:"limit_range",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Priority Class",entityName:"priority_class",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Value",name:"value",type:"default"},{labelName:"Global Default",name:"global_default",type:"boolean",value:["TRUE","FALSE"]},{labelName:"Description",name:"description",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"ConfigMap",entityName:"config_map",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Secret",entityName:"secret",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Type",name:"secret_type",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Role",entityName:"role",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Role Binding",entityName:"role_binding",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Role",name:"role_ref",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Cluster Role",entityName:"cluster_role",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Cluster Role Binding",entityName:"cluster_role_binding",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Cluster Role",name:"role_ref",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Persistent Volume",entityName:"persistent_volume",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Capacity",name:"capacity",type:"default"},{labelName:"Access Modes",name:"access_modes",type:"default"},{labelName:"Reclaim Policy",name:"reclaim_policy",type:"default"},{labelName:"Status",name:"phase",type:"default"},{labelName:"Request",name:"claim_ref",type:"default"},{labelName:"Storage Class",name:"storage_class_name",type:"default"},{labelName:"Reason",name:"reason",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Persistent Volume Claim",entityName:"persistent_volume_claim",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Phase",name:"phase",type:"default"},{labelName:"VolumeName",name:"volume_name",type:"default"},{labelName:"Capacity",name:"capacity",type:"default"},{labelName:"Request",name:"request",type:"default"},{labelName:"Access Mode",name:"access_mode",type:"default"},{labelName:"Storage Class",name:"storage_class",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Storage Class",entityName:"storage_class",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Provisioner",name:"provisioner",type:"default"},{labelName:"Parameters",name:"parameters",type:"key-value"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"StatefulSet",entityName:"stateful_set",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Ingress",entityName:"ingress",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"DaemonSet",entityName:"daemon_set",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Endpoint",entityName:"endpoint",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Node",name:"node_name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Event",entityName:"event",entityColumn:[{labelName:"Type",name:"k8s_event_type",type:"default"},{labelName:"Reason",name:"reason",type:"default"},{labelName:"Object Kind",name:"object_kind",type:"default"},{labelName:"Object Name",name:"object_name",type:"default"},{labelName:"Message",name:"message",type:"default"},{labelName:"Last Time Stamp",name:"time_stamp",type:"datetime"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"API Service",entityName:"api_service",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"ServiceAccount",entityName:"service_account",entityColumn:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{cloudServiceProvider:"k8s",labelName:"Horizontal Pod Autoscaler",entityName:"horizontal_pod_autoscaler",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Scale Target",name:"scale_target",type:"default"},{labelName:"Target CPU Utilization Percentage",name:"target_cpu_utilization_percentage",type:"default"}]},{cloudServiceProvider:"k8s",labelName:"Schedule",entityName:"schedule",entityColumn:[{labelName:"Name",name:"name",type:"default"},{labelName:"Kind",name:"kind",type:"default"},{labelName:"Namespace Name",name:"namespace_name",type:"default"},{labelName:"Resource Name",name:"resource_name",type:"default"},{labelName:"Launch Template Name",name:"launch_template_name",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"Start",name:"start_time",type:"default"},{labelName:"Stop",name:"stop_time",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]}],b=[{cloudServiceProvider:"aws_cloud",name:"ALL",labelName:"AWS Cloud (ALL)"},{cloudServiceProvider:"k8s",name:"ALL",labelName:"K8s (ALL)"}],y=t(2),N=t.n(y),f=t(5),v=t(0),j=function(){var e=function(){var e=Object(f.a)(N.a.mark((function e(a,t,n){var l,c,r,o,m,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=new FormData).append("grant_type","authorization_code"),l.append("client_id",t),l.append("client_secret",s),l.append("code",a),l.append("redirect_uri",n),e.next=8,fetch("/oauth/token",{method:"POST",body:l});case 8:if((c=e.sent).ok){e.next=11;break}throw new Error("Authorization failed");case 11:return e.next=13,c.json();case 13:if(!("access_token"in(r=e.sent))){e.next=23;break}o=r.access_token,m=r.refresh_token,i=(new Date).getTime()+1e3*r.expires_in,window.localStorage.setItem("accessToken",o),window.localStorage.setItem("refreshToken",m),window.localStorage.setItem("expiresDatetime","".concat(i)),e.next=24;break;case 23:throw new Error("Authorization failed");case 24:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.group("Authorization Code Grant");var a=window.localStorage.getItem("clientId"),t=window.localStorage.getItem("redirectUri");if(null===a||null==t)return console.log("Client ID : No"),console.error("Authorization failed."),console.groupEnd(),void(window.location.href=d);console.log("Client ID : Yes");var n=new URL(window.location.href).searchParams.get("code");if(null===n)return console.log("Authorization code : No"),console.error("Authorization failed."),console.groupEnd(),void(window.location.href=d);console.log("authorization code : Yes"),e(n,a,t).then((function(){console.log("Access token : Yes"),console.groupEnd(),window.location.href=d+"/aws_cloud/instance"})).catch((function(){console.log("Access token : No"),console.error("Authorization failed."),console.groupEnd(),window.location.href=d}))}),[]),Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("h2",{children:"Please waiting..."})})})})},h=t(4),_=function(){var e=Object(n.useState)(""),a=Object(h.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(""),r=Object(h.a)(c,2),o=r[0],m=r[1],i=function(){var e=Object(f.a)(N.a.mark((function e(){var a,t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/jsonapi/consumer/consumer");case 2:return e.next=4,e.sent.json();case 4:a=e.sent,(t=a.data.filter((function(e){return"Cloud Dashboard"===e.attributes.label}))).length>=1&&(l(t[0].id),m(t[0].attributes.redirect));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("clientId",t)}),[t]),Object(n.useEffect)((function(){window.localStorage.setItem("redirectUri",o)}),[o]),Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("form",{children:Object(v.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){var e="/oauth/authorize?response_type=code&client_id=".concat(t,"&redirect_uri=").concat(o);window.location.href=e},disabled:""===t,children:"login"})})})})})},C=t(10),x=t(20),g=t(21),O=function(){function e(){Object(x.a)(this,e),this.cache={}}return Object(g.a)(e,[{key:"getJson",value:function(){var e=Object(f.a)(N.a.mark((function e(a,t){var n,l,c,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a in this.cache)){e.next=5;break}if(n=this.cache[a],!((l=(new Date).getTime())>=n.unixtime&&l-n.unixtime<864e5)){e.next=5;break}return e.abrupt("return",n.response);case 5:return e.next=7,fetch(a,t);case 7:return e.next=9,e.sent.json();case 9:return c=e.sent,r=(new Date).getTime(),this.cache[a]={response:c,unixtime:r},e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return this.instance}}]),e}();O.instance=new O;var S=O,k=function(e,a){return"000000".concat(e).slice(-a)},w=function(e,a){for(var t=1,n=0;n<a;n+=1)t*=10;if(Math.floor(e)!==e)return"".concat(Math.round(e*t)/t);var l="".concat(e);if(0!==a){l+=".";for(var c=0;c<a;c+=1)l+="0"}return l},P=function(e,a,t){if(null===e)return"";switch(a.type){case"datetime":return function(e){var a=new Date(e),t=a.getFullYear(),n=a.getMonth()+1,l=a.getDate(),c=a.getHours(),r=a.getMinutes(),o="".concat(t,"/").concat(k(n,2),"/").concat(k(l,2));return o+" - ".concat(k(c,2),":").concat(k(r,2))}(e);case"memory":return e>=1073741824?"".concat(w(e/1073741824,2),"Gi"):e>=1048576?"".concat(w(e/1048576,2),"Mi"):e>=1024?"".concat(w(e/1024,2),"Ki"):w(e,2);case"key-value":var n,l=[],c=Object(C.a)(e);try{for(c.s();!(n=c.n()).done;){var r=n.value;l.push("".concat(r.item_key,":").concat(r.item_value))}}catch(s){c.e(s)}finally{c.f()}return l.join(", ");case"cost":return"$".concat(e);case"boolean":return e?a.value[0]:a.value[1];case"array":return e.map((function(e){return"".concat(e)})).join(", ");case"join":var o,m=Object(C.a)(t[a.info.entityTypeId]);try{for(m.s();!(o=m.n()).done;){var i=o.value;if(i.attributes[a.info.keyColumn]===e)return i.attributes[a.info.valueColumn]}}catch(s){m.e(s)}finally{m.f()}return"(".concat(e,")");default:return e}},I=function(e){return"/".concat(e.cloudServiceProvider,"/").concat(e.entityName)},T=function(e){return"".concat(e.cloudServiceProvider,"_").concat(e.entityName)},A=function(){var e=Object(f.a)(N.a.mark((function e(a,t){var n,l,c,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in(n=[]).push({key:"page[limit]",value:"".concat(t.limit)}),n.push({key:"page[offset]",value:"".concat(t.offset)}),t.filter)n.push({key:"filter[".concat(l,"]"),value:t.filter[l]});return""!==t.sort.key&&n.push("ASC"===t.sort.direction?{key:"sort",value:t.sort.key}:{key:"sort",value:"-"+t.sort.key}),c="/jsonapi/".concat(a,"/").concat(a),n.length>0&&(c+="?"+n.map((function(e){return e.key+"="+e.value})).join("&")),e.next=9,S.getInstance().getJson(c);case 9:return r=e.sent,e.abrupt("return",r.data);case 11:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(N.a.mark((function e(a){var t,n,l,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=S.getInstance(),l="/jsonapi/".concat(a,"/").concat(a);case 3:return e.next=6,n.getJson(l);case 6:if(c=e.sent,t=[].concat(Object(o.a)(t),Object(o.a)(c.data)),void 0===c.links.next){e.next=12;break}l=c.links.next.href,e.next=13;break;case 12:return e.abrupt("break",15);case 13:e.next=3;break;case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),E=function(e){var a=e.entityTypeId,t=e.column,l=e.cloudContext,c=e.namespace,r=e.namespaceName,o=e.sortInfo,m=e.setSortInfo,i=e.pageIndex,s=Object(n.useState)([]),d=Object(h.a)(s,2),u=d[0],p=d[1],b=Object(n.useState)([]),y=Object(h.a)(b,2),j=y[0],_=y[1];return Object(n.useEffect)((function(){var e={};""!==c&&(e.namespace=c),""!==r&&(e.namespaceName=r),"ALL"!==l.name&&(e.cloud_context=l.name),A(a,{limit:30,offset:30*i,filter:e,sort:o}).then((function(e){p(e)}))}),[c,r,l,o,i]),Object(n.useEffect)((function(){(function(){var e=Object(f.a)(N.a.mark((function e(){var a,n,l,c,r,o,m,i,s,d,p,b;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},n=Object(C.a)(t),e.prev=2,n.s();case 4:if((l=n.n()).done){e.next=12;break}if("join"!==(c=l.value).type||c.info.entityTypeId in a){e.next=10;break}return e.next=9,D(c.info.entityTypeId);case 9:a[c.info.entityTypeId]=e.sent;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:r=[],o=Object(C.a)(u);try{for(o.s();!(m=o.n()).done;){i=m.value,s={id:i.id,attributes:{}},d=Object(C.a)(t);try{for(d.s();!(p=d.n()).done;)b=p.value,s.attributes[b.name]=P(i.attributes[b.name],b,a)}catch(y){d.e(y)}finally{d.f()}r.push(s)}}catch(y){o.e(y)}finally{o.f()}_(r);case 24:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(){return e.apply(this,arguments)}})()()}),[u]),Object(v.jsxs)("table",{className:"table table-hover table-striped sticky-enabled sticky-table",children:[Object(v.jsxs)("thead",{children:[Object(v.jsx)("th",{children:Object(v.jsx)("input",{type:"checkbox",className:"form-checkbox",title:"Select all rows"})}),t.map((function(e){return Object(v.jsxs)("th",{onClick:function(){return a=e.name,void(o.key===a?"ASC"!==o.direction?m({key:"",direction:"ASC"}):m({key:a,direction:"DESC"}):m({key:a,direction:"ASC"}));var a},children:[e.labelName,o.key===e.name&&"ASC"===o.direction?"\u2191":o.key===e.name&&"DESC"===o.direction?"\u2193":""]},e.name)}))]}),Object(v.jsx)("tbody",{children:j.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:Object(v.jsx)("input",{className:"form-checkbox",type:"checkbox"})}),t.map((function(a){return Object(v.jsx)("td",{children:e.attributes[a.name]},a.name)}))]},e.id)}))})]})},R=function(e){var a=e.cloudContext,t=e.columnKey,l=e.columnName,c=e.setColumnName,r=Object(n.useState)([]),o=Object(h.a)(r,2),m=o[0],i=o[1];return Object(n.useEffect)((function(){var e="/jsonapi/".concat(a.cloudServiceProvider,"_").concat(t,"/").concat(a.cloudServiceProvider,"_").concat(t);"ALL"!==a.name&&(e+="?cloudContext=".concat(a)),S.getInstance().getJson(e).then((function(e){i(e.data.map((function(e){return e.attributes.name})))}))}),[a]),Object(v.jsxs)("select",{className:"form-select form-control",value:l,onChange:function(e){c(e.currentTarget.value)},children:[Object(v.jsx)("option",{value:"",children:"- \u3059\u3079\u3066 -"}),m.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))]})},L=function(e){var a=e.cloudContext,t=e.entityTypeId,l=e.namespace,c=e.namespaceName,r=e.itemCount,o=e.setItemCount;return Object(n.useEffect)((function(){var e="ALL"===a.name?"/cloud_dashboard/".concat(a.cloudServiceProvider,"/").concat(t,"/entity/count"):"/cloud_dashboard/".concat(a.cloudServiceProvider,"/").concat(a.name,"/").concat(t,"/entity/count");""!==l&&(e+="?namespace=".concat(l)),""!==c&&(e+="?namespace_name=".concat(c)),S.getInstance().getJson(e).then((function(e){o(e.count)}))}),[a,l,c]),Object(v.jsxs)("label",{className:"control-label",children:["Item Count: ",r]})},z=function(e){var a=e.pageIndex,t=e.setPageIndex,n=e.itemCount,l=Math.floor(1*(n+30-1)/30);return Object(v.jsx)("nav",{children:Object(v.jsxs)("ul",{className:"pagination",children:[Object(v.jsx)("li",{className:0!==a?"":"disabled",children:Object(v.jsx)("span",{"aria-label":"First",onClick:function(){t(0)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(v.jsx)("li",{className:0!==a?"":"disabled",children:Object(v.jsx)("span",{"aria-label":"Previous",onClick:function(){t(Math.max(0,a-1))},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\uff1c"})})}),Object(v.jsx)("li",{children:Object(v.jsx)("span",{children:a+1})}),Object(v.jsx)("li",{className:0!==n&&a!==l-1?"":"disabled",children:Object(v.jsx)("span",{"aria-label":"Next",onClick:function(){t(Math.min(a+1,l-1))},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\uff1e"})})}),Object(v.jsx)("li",{className:0!==n&&a!==l-1?"":"disabled",children:Object(v.jsx)("span",{"aria-label":"Last",onClick:function(){t(l-1)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})},M=function(){var e=Object(n.useState)(function(){var e=localStorage.getItem("cloudContext");return null!==e?JSON.parse(e):b[0]}()),a=Object(h.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)(Object(o.a)(b)),r=Object(h.a)(c,2),m=r[0],i=r[1];Object(n.useEffect)((function(){(function(){var e=Object(f.a)(N.a.mark((function e(){var a,n,c,r,m;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=["aws_cloud","k8s"],n=Object(o.a)(b),c=N.a.mark((function e(){var a,t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m[r],e.next=3,S.getInstance().getJson("/jsonapi/cloud_config/".concat(a));case 3:t=e.sent.data.map((function(e){return{cloudServiceProvider:a,name:e.attributes.cloud_context,labelName:e.attributes.name}})),n=[].concat(Object(o.a)(n),Object(o.a)(t));case 5:case"end":return e.stop()}}),e)})),r=0,m=a;case 4:if(!(r<m.length)){e.next=9;break}return e.delegateYield(c(),"t0",6);case 6:r++,e.next=4;break;case 9:i(n),0===n.filter((function(e){return e.cloudServiceProvider===t.cloudServiceProvider&&e.name===t.name})).length&&l(b[0]);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return{cloudContext:t,cloudContextList:m,dispatch:function(e){switch(e.type){case"setCloudContext":localStorage.setItem("cloudContext",JSON.stringify(e.message)),l(e.message)}}}},V=Object(n.createContext)({cloudContext:b[0],cloudContextList:[],dispatch:function(){}}),q=function(e){var a=e.entityTypeId,t=e.column,l=Object(n.useContext)(V).cloudContext,c=Object(n.useState)(""),r=Object(h.a)(c,2),o=r[0],m=r[1],i=Object(n.useState)(""),s=Object(h.a)(i,2),d=s[0],u=s[1],p=Object(n.useState)(0),b=Object(h.a)(p,2),y=b[0],N=b[1],f=Object(n.useState)({key:"",direction:"ASC"}),j=Object(h.a)(f,2),_=j[0],C=j[1],x=Object(n.useState)(0),g=Object(h.a)(x,2),O=g[0],S=g[1];Object(n.useEffect)((function(){""!==o&&u("")}),[o]),Object(n.useEffect)((function(){""!==d&&m("")}),[d]);var k=t.map((function(e){return e.labelName})).includes("Namespace"),w=t.map((function(e){return e.labelName})).includes("Namespace Name");return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("form",{children:[k?Object(v.jsxs)("div",{className:"form-group",style:{marginTop:"2rem"},children:[Object(v.jsx)("label",{className:"control-label",children:"Namespace"}),Object(v.jsx)(R,{cloudContext:l,columnKey:"namespace",columnName:o,setColumnName:m})]}):Object(v.jsx)(v.Fragment,{}),w?Object(v.jsxs)("div",{className:"form-group",style:{marginTop:"2rem"},children:[Object(v.jsx)("label",{className:"control-label",children:"Namespace Name"}),Object(v.jsx)(R,{cloudContext:l,columnKey:"namespace_name",columnName:d,setColumnName:u})]}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("div",{className:"form-group",style:{marginTop:"2rem"},children:Object(v.jsx)(L,{cloudContext:l,entityTypeId:a,namespace:o,namespaceName:d,itemCount:y,setItemCount:N})}),Object(v.jsx)("div",{className:"table-responsive",style:{marginTop:"2rem"},children:Object(v.jsx)(E,{entityTypeId:a,column:t,cloudContext:l,namespace:o,namespaceName:d,sortInfo:_,setSortInfo:C,pageIndex:O})}),Object(v.jsx)(z,{pageIndex:O,setPageIndex:S,itemCount:y})]})})})})},G=function(){var e=Object(f.a)(N.a.mark((function e(a,t){var n,l,c,r,o,m;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("grant_type","refresh_token"),n.append("client_id",a),n.append("client_secret",s),n.append("refresh_token",t),e.next=7,fetch("/oauth/token",{method:"POST",body:n});case 7:if((l=e.sent).ok){e.next=10;break}throw new Error("Refresh failed");case 10:return e.next=12,l.json();case 12:if(!("access_token"in(c=e.sent))){e.next=22;break}r=c.access_token,o=c.refresh_token,m=(new Date).getTime()+1e3*c.expires_in,window.localStorage.setItem("accessToken",r),window.localStorage.setItem("refreshToken",o),window.localStorage.setItem("expiresDatetime","".concat(m)),e.next=23;break;case 22:throw new Error("Refresh failed");case 23:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),U=function(){var e=Object(n.useContext)(V),a=e.cloudContext,t=e.cloudContextList,l=e.dispatch;Object(n.useEffect)((function(){var e=window.localStorage.getItem("accessToken"),a=window.localStorage.getItem("expiresDatetime");if(null!==e&&null!=a){console.group("Authorization Code Grant");var t=window.localStorage.getItem("clientId"),n=window.localStorage.getItem("refreshToken");if(null===t||null===n)return console.log("Client ID : No"),console.error("Authorization failed."),console.groupEnd(),void(window.location.href=d);console.log("Client ID : Yes"),(new Date).getTime()>parseInt(a,10)?(console.log("Token expired : Yes"),G(t,n).then((function(){console.log("Access token : Yes"),console.groupEnd()})).catch((function(){console.log("Access token : No"),console.error("Authorization failed."),console.groupEnd(),window.location.href=d}))):(console.log("Token expired : No"),console.groupEnd())}else window.location.href=d}),[]);return Object(v.jsx)("nav",{className:"navbar navbar-default",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsxs)("div",{className:"navbar-header",children:[Object(v.jsxs)("button",{type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navbar-collapse",children:[Object(v.jsx)("span",{className:"sr-only",children:"Toggle navigation"}),Object(v.jsx)("span",{className:"icon-bar"}),Object(v.jsx)("span",{className:"icon-bar"}),Object(v.jsx)("span",{className:"icon-bar"})]}),Object(v.jsx)("div",{className:"region region-navigation",children:Object(v.jsx)("a",{className:"logo navbar-btn pull-left",href:"/",title:"\u30db\u30fc\u30e0",rel:"home",children:Object(v.jsx)("img",{src:"/themes/contrib/bootstrap_cloud/logo.svg",alt:"\u30db\u30fc\u30e0"})})})]}),Object(v.jsx)("div",{className:"collapse navbar-collapse",children:Object(v.jsxs)("ul",{className:"nav navbar-nav",children:[Object(v.jsxs)("li",{className:"dropdown",children:[Object(v.jsxs)("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown","aria-expanded":!1,children:["".concat(a.labelName)," ",Object(v.jsx)("span",{className:"caret"})]}),Object(v.jsx)("ul",{className:"dropdown-menu",role:"menu",children:t.map((function(e,a){var t="aws_cloud"===e.cloudServiceProvider?u:p;return Object(v.jsx)("li",{role:"presentation",children:Object(v.jsx)(m.b,{to:I(t[0]),onClick:function(){return function(e){l({type:"setCloudContext",message:e})}(e)},children:"".concat(e.labelName)})},a)}))})]}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#",onClick:function(){window.localStorage.removeItem("accessToken"),window.localStorage.removeItem("refreshToken"),window.localStorage.removeItem("expiresDatetime"),window.location.href=d},children:"logout"})})]})})]})})},F=function(e){var a=e.isActive,t=e.location,n=e.labelName;return Object(v.jsx)("li",{className:a?"active":"",children:Object(v.jsx)(m.b,{to:t,className:a?"is-active":"",children:n})})},J=function(e){var a=e.menuType,t=e.menuName,l=Object(n.useContext)(V).cloudContext,c=Object(i.f)();return Object(n.useEffect)((function(){if(l.cloudServiceProvider!==a)switch(l.cloudServiceProvider){case"aws_cloud":c.push(I(u[0]));break;case"k8s":c.push(I(p[0]))}}),[l]),Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("nav",{className:"tabs",role:"navigation","aria-label":"Tabs",children:Object(v.jsx)("ul",{className:"tabs--primary nav nav-tabs",children:("aws_cloud"===a?u:p).map((function(e){return Object(v.jsx)(F,{isActive:e.labelName===t,location:I(e),labelName:e.labelName},e.labelName)}))})})})})})},K=function(){var e=Object(n.useContext)(V).cloudContextList;return Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsxs)("form",{children:[Object(v.jsx)("div",{className:"form-group",style:{marginTop:"2rem"},children:Object(v.jsx)("label",{className:"control-label",children:"Cloud Service Providers"})}),Object(v.jsx)("div",{className:"table-responsive",style:{marginTop:"2rem"},children:Object(v.jsxs)("table",{className:"table table-hover table-striped sticky-enabled sticky-table",children:[Object(v.jsx)("thead",{children:Object(v.jsx)("th",{children:"Name"})}),Object(v.jsx)("tbody",{children:e.filter((function(e){return"ALL"!==e.name})).map((function(e,a){return Object(v.jsx)("tr",{children:Object(v.jsx)("td",{children:e.labelName})},a)}))})]})})]})})})})},Y=function(){return Object(v.jsx)(m.a,{basename:d,children:Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{exact:!0,path:"/",children:Object(v.jsx)(_,{})}),Object(v.jsx)(i.a,{path:"/callback",children:Object(v.jsx)(j,{})}),Object(v.jsxs)(V.Provider,{value:M(),children:[Object(v.jsxs)(i.a,{path:"/providers",children:[Object(v.jsx)(U,{}),Object(v.jsx)(K,{})]}),[].concat(Object(o.a)(u),Object(o.a)(p)).map((function(e){return Object(v.jsxs)(i.a,{path:I(e),children:[Object(v.jsx)(U,{}),Object(v.jsx)(J,{menuType:e.cloudServiceProvider,menuName:e.labelName}),Object(v.jsx)(q,{entityTypeId:T(e),column:e.entityColumn})]},T(e))}))]})]})})},B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,36)).then((function(a){var t=a.getCLS,n=a.getFID,l=a.getFCP,c=a.getLCP,r=a.getTTFB;t(e),n(e),l(e),c(e),r(e)}))};r.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(Y,{})}),document.getElementById("root")),B()}},[[35,1,2]]]);
//# sourceMappingURL=main.9ddf2cd4.chunk.js.map