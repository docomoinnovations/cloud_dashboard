(this.webpackJsonpcloud_dashboard=this.webpackJsonpcloud_dashboard||[]).push([[0],{33:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),l=t(18),s=t.n(l),r=t(20),o=t(3),i="/clouds/dashboard",m=[{type:"AWS",name:"Cloud instance",url:"/aws_cloud/instance"}],u=[{type:"K8s",name:"Node",url:"/k8s/node",entityTypeId:"k8s_node",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"CPU (Request)",name:"cpu_request",type:"default"},{labelName:"CPU (Limit)",name:"cpu_limit",type:"default"},{labelName:"CPU (Usage)",name:"cpu_usage",type:"default"},{labelName:"Memory (Request)",name:"memory_request",type:"memory"},{labelName:"Memory (Limit)",name:"memory_limit",type:"memory"},{labelName:"Memory (Usage)",name:"memory_usage",type:"memory"},{labelName:"Pods (Applcation)",name:"pods_allocation",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Namespace",url:"/k8s/namespace",entityTypeId:"k8s_namespace",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Deployment",url:"/k8s/deployment",entityTypeId:"k8s_deployment",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Pod",url:"/k8s/pod",entityTypeId:"k8s_pod",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Node",name:"node_name",type:"default"},{labelName:"State",name:"status",type:"default"},{labelName:"Restarts",name:"restarts",type:"default"},{labelName:"CPU (Usage)",name:"cpu_usage",type:"default"},{labelName:"Memory (Usage)",name:"memory_usage",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"ReplicaSet",url:"/k8s/replica_set",entityTypeId:"k8s_replica_set",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Replica",name:"replicas",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"CronJob",url:"/k8s/cron_job",entityTypeId:"k8s_cron_job",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Schedule",name:"schedule",type:"default"},{labelName:"Suspend",name:"suspend",type:"default"},{labelName:"Active",name:"active",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Job",url:"/k8s/job",entityTypeId:"k8s_job",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Image",name:"image",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Service",url:"/k8s/service",entityTypeId:"k8s_service",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Cluster IP",name:"cluster_ip",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Network Policy",url:"/k8s/network_policy",entityTypeId:"k8s_network_policy",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Resource Quotas",url:"/k8s/resource_quota",entityTypeId:"k8s_resource_quota",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"LimitRange",url:"/k8s/limit_range",entityTypeId:"k8s_limit_range",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Priority Class",url:"/k8s/priority_class",entityTypeId:"k8s_priority_class",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Value",name:"value",type:"default"},{labelName:"Global Default",name:"global_default",type:"boolean"},{labelName:"Description",name:"description",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"ConfigMap",url:"/k8s/config_map",entityTypeId:"k8s_config_map",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Secret",url:"/k8s/secret",entityTypeId:"k8s_secret",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Type",name:"secret_type",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Role",url:"/k8s/role",entityTypeId:"k8s_role",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Role Binding",url:"/k8s/role_binding",entityTypeId:"k8s_role_binding",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Role",name:"role_ref",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Cluster Role",url:"/k8s/cluster_role",entityTypeId:"k8s_cluster_role",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Cluster Role Binding",url:"/k8s/cluster_role_binding",entityTypeId:"k8s_cluster_role_binding",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Cluster Role",name:"role_ref",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Persistent Volume",url:"/k8s/persistent_volume",entityTypeId:"k8s_persistent_volume",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Capacity",name:"capacity",type:"default"},{labelName:"Access Modes",name:"access_modes",type:"default"},{labelName:"Reclaim Policy",name:"reclaim_policy",type:"default"},{labelName:"Status",name:"phase",type:"default"},{labelName:"Request",name:"claim_ref",type:"default"},{labelName:"Storage Class",name:"storage_class_name",type:"default"},{labelName:"Reason",name:"reason",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Persistent Volume Claim",url:"/k8s/persistent_volume_claim",entityTypeId:"k8s_persistent_volume_claim",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Phase",name:"phase",type:"default"},{labelName:"VolumeName",name:"volume_name",type:"default"},{labelName:"Capacity",name:"capacity",type:"default"},{labelName:"Request",name:"request",type:"default"},{labelName:"Access Mode",name:"access_mode",type:"default"},{labelName:"Storage Class",name:"storage_class",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Storage Class",url:"/k8s/storage_class",entityTypeId:"k8s_storage_class",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Provisioner",name:"provisioner",type:"default"},{labelName:"Parameters",name:"parameters",type:"key-value"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"StatefulSet",url:"/k8s/stateful_set",entityTypeId:"k8s_stateful_set",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Ingress",url:"/k8s/ingress",entityTypeId:"k8s_ingress",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"DaemonSet",url:"/k8s/daemon_set",entityTypeId:"k8s_daemon_set",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Endpoint",url:"/k8s/endpoint",entityTypeId:"k8s_endpoint",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Node",name:"node_name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Event",url:"/k8s/event",entityTypeId:"k8s_event",column:[{labelName:"Type",name:"k8s_event_type",type:"default"},{labelName:"Reason",name:"reason",type:"default"},{labelName:"Object Kind",name:"object_kind",type:"default"},{labelName:"Object Name",name:"object_name",type:"default"},{labelName:"Message",name:"message",type:"default"},{labelName:"Last Time Stamp",name:"time_stamp",type:"datetime"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"API Service",url:"/k8s/api_service",entityTypeId:"k8s_api_service",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"ServiceAccount",url:"/k8s/service_account",entityTypeId:"k8s_service_account",column:[{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Name",name:"name",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]},{type:"K8s",name:"Horizontal Pod Autoscaler",url:"/k8s/horizontal_pod_autoscaler",entityTypeId:"k8s_horizontal_pod_autoscaler",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Namespace",name:"namespace",type:"default"},{labelName:"Scale Target",name:"scale_target",type:"default"},{labelName:"Target CPU Utilization Percentage",name:"target_cpu_utilization_percentage",type:"default"}]},{type:"K8s",name:"Schedule",url:"/k8s/schedule",entityTypeId:"k8s_schedule",column:[{labelName:"Name",name:"name",type:"default"},{labelName:"Kind",name:"kind",type:"default"},{labelName:"Namespace Name",name:"namespace_name",type:"default"},{labelName:"Resource Name",name:"resource_name",type:"default"},{labelName:"Launch Template Name",name:"launch_template_name",type:"default"},{labelName:"State",name:"state",type:"default"},{labelName:"Start",name:"start_time",type:"default"},{labelName:"Stop",name:"stop_time",type:"default"},{labelName:"Created",name:"created",type:"datetime"}]}],d=t(9),p=t.n(d),b=t(11),y=t(0),j=function(){var e=function(){var e=Object(b.a)(p.a.mark((function e(a,t,n){var c,l,s,r,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("grant_type","authorization_code"),c.append("client_id",t),c.append("client_secret","cloud_dashboard"),c.append("code",a),c.append("redirect_uri",n),e.next=8,fetch("/oauth/token",{method:"POST",body:c});case 8:if((l=e.sent).ok){e.next=11;break}throw new Error("Authorization failed");case 11:return e.next=13,l.json();case 13:if(!("access_token"in(s=e.sent))){e.next=23;break}r=s.access_token,o=s.refresh_token,i=(new Date).getTime()+1e3*s.expires_in,window.localStorage.setItem("accessToken",r),window.localStorage.setItem("refreshToken",o),window.localStorage.setItem("expiresDatetime","".concat(i)),e.next=24;break;case 23:throw new Error("Authorization failed");case 24:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.group("Authorization Code Grant");var a=window.localStorage.getItem("clientId"),t=window.localStorage.getItem("redirectUri");if(null===a||null==t)return console.log("Client ID : No"),console.error("Authorization failed."),console.groupEnd(),void(window.location.href=i);console.log("Client ID : Yes");var n=new URL(window.location.href).searchParams.get("code");if(null===n)return console.log("Authorization code : No"),console.error("Authorization failed."),console.groupEnd(),void(window.location.href=i);console.log("authorization code : Yes"),e(n,a,t).then((function(){console.log("Access token : Yes"),console.groupEnd(),window.location.href=i+"/aws_cloud/instance"})).catch((function(){console.log("Access token : No"),console.error("Authorization failed."),console.groupEnd(),window.location.href=i}))}),[]),Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:"col",children:Object(y.jsx)("h2",{children:"Please waiting..."})})})},f=t(2),h=function(){var e=Object(n.useState)(""),a=Object(f.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(""),s=Object(f.a)(l,2),r=s[0],o=s[1],i=function(){var e=Object(b.a)(p.a.mark((function e(){var a,t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/jsonapi/consumer/consumer");case 2:return e.next=4,e.sent.json();case 4:a=e.sent,(t=a.data.filter((function(e){return"Cloud Dashboard"===e.attributes.label}))).length>=1&&(c(t[0].id),o(t[0].attributes.redirect));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("clientId",t)}),[t]),Object(n.useEffect)((function(){window.localStorage.setItem("redirectUri",r)}),[r]),Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:"col",children:Object(y.jsx)("form",{children:Object(y.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){var e="/oauth/authorize?response_type=code&client_id=".concat(t,"&redirect_uri=").concat(r);window.location.href=e},disabled:""===t,children:"login"})})})})},N=function(e){var a=e.menuType,t=e.menuName;Object(n.useEffect)((function(){var e=window.localStorage.getItem("accessToken"),a=window.localStorage.getItem("expiresDatetime");null!==e&&null!=a?(new Date).getTime()>parseInt(a,10)&&(window.location.href=i):window.location.href=i}),[]);return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("ul",{className:"nav nav-tabs",children:[Object(y.jsx)("li",{role:"presentation",className:"AWS"===a?"active":"",children:Object(y.jsx)("a",{href:"".concat(i,"/aws_cloud/instance"),children:"AWS"})}),Object(y.jsx)("li",{role:"presentation",className:"K8s"===a?"active":"",children:Object(y.jsx)("a",{href:"".concat(i).concat(u[0].url),children:"K8s"})})]}),Object(y.jsxs)("ul",{className:"nav nav-tabs",children:[("AWS"===a?m:u).map((function(e){return Object(y.jsx)("li",{role:"presentation",className:e.name===t?"active":"",children:Object(y.jsx)("a",{href:"".concat(i).concat(e.url),children:e.name})},e.name)})),Object(y.jsx)("li",{role:"presentation",children:Object(y.jsx)("a",{href:"#",onClick:function(){window.localStorage.removeItem("accessToken"),window.localStorage.removeItem("refreshToken"),window.localStorage.removeItem("expiresDatetime"),window.location.href=i},children:"logout"})})]})]})},O=function(){var e=Object(n.useState)([]),a=Object(f.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(30),s=Object(f.a)(l,1)[0],r=Object(n.useState)(0),o=Object(f.a)(r,2),m=o[0],u=o[1],d=Object(n.useState)(0),p=Object(f.a)(d,2),b=p[0],j=p[1],h=Object(n.useState)([]),N=Object(f.a)(h,2),O=N[0],_=N[1],x=Object(n.useState)(""),k=Object(f.a)(x,2),C=k[0],g=k[1],v=Object(n.useState)({key:"",direction:"ASC"}),S=Object(f.a)(v,2),w=S[0],I=S[1],T=Object(n.useState)(!1),A=Object(f.a)(T,2),K=A[0],E=A[1],D=function(e){w.key===e?"ASC"!==w.direction?I({key:"",direction:"ASC"}):I({key:e,direction:"DESC"}):I({key:e,direction:"ASC"})},P=function(e,a){return"000000".concat(e).slice(-a)},z=function(e){var a=new Date(e),t=a.getFullYear(),n=a.getMonth()+1,c=a.getDate(),l=a.getHours(),s=a.getMinutes(),r="".concat(t,"/").concat(P(n,2),"/").concat(P(c,2));return r+=" - ".concat(P(l,2),":").concat(P(s,2))};return Object(n.useEffect)((function(){var e=window.localStorage.getItem("accessToken"),a=window.localStorage.getItem("expiresDatetime");null!==e&&null!=a?(new Date).getTime()>parseInt(a,10)&&(window.location.href=i):window.location.href=i}),[]),Object(n.useEffect)((function(){var e="/jsonapi/aws_cloud_instance/aws_cloud_instance?page[limit]=".concat(s,"&page[offset]=").concat(b*s);""!==C&&(e+="&filter[cloud_context]=".concat(C)),""!==w.key&&("ASC"===w.direction?e+="&sort=".concat(w.key):e+="&sort=-".concat(w.key)),fetch(e).then((function(e){return e.json()})).then((function(e){e.links.next?E(!0):E(!1),c(e.data.map((function(e){return{drupal_internal__id:e.attributes.drupal_internal__id,cloud_context:e.attributes.cloud_context,name:e.attributes.name,public_ip:e.attributes.public_ip,instance_state:e.attributes.instance_state,instance_type:e.attributes.instance_type,availability_zone:e.attributes.availability_zone,cost:e.attributes.cost,created:z(e.attributes.created)}})))}))}),[s,b,C,w]),Object(n.useEffect)((function(){fetch("/jsonapi/cloud_config/aws_cloud").then((function(e){return e.json()})).then((function(e){_(e.data.map((function(e){return e.attributes.cloud_context})))}))}),[]),Object(n.useEffect)((function(){if(""===C)u(0);else{var e="/cloud_dashboard/aws_cloud/".concat(C,"/aws_cloud_instance/entity/count");fetch(e).then((function(e){return e.json()})).then((function(e){u(e.count)}))}}),[C]),Object(n.useEffect)((function(){!O.includes(C)&&O.length>=1&&g(O[0])}),[O]),Object(y.jsx)("div",{className:"row",style:{marginTop:"2rem"},children:Object(y.jsx)("div",{className:"col",children:Object(y.jsxs)("form",{children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"control-label",children:"Cloud context"}),Object(y.jsx)("select",{className:"form-select form-control",value:C,onChange:function(e){g(e.currentTarget.value)},children:O.map((function(e){return Object(y.jsx)("option",{value:e,children:e},e)}))})]}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsxs)("label",{className:"control-label",children:["Item Count: ",m]})}),Object(y.jsx)("div",{className:"table-responsive",children:Object(y.jsxs)("table",{className:"table table-hover table-striped sticky-enabled sticky-table",children:[Object(y.jsxs)("thead",{children:[Object(y.jsx)("th",{children:Object(y.jsx)("input",{type:"checkbox",className:"form-checkbox",title:"\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u3059\u3079\u3066\u306e\u5217\u3092\u9078\u629e\u3059\u308b"})}),Object(y.jsxs)("th",{onClick:function(){return D("name")},children:["Name","name"===w.key&&"ASC"===w.direction?"\u2191":"name"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("public_ip")},children:["Public IP","public_ip"===w.key&&"ASC"===w.direction?"\u2191":"public_ip"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("instance_state")},children:["Instance State","instance_state"===w.key&&"ASC"===w.direction?"\u2191":"instance_state"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("instance_type")},children:["Instance Type","instance_type"===w.key&&"ASC"===w.direction?"\u2191":"instance_type"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("availability_zone")},children:["Availability Zone","availability_zone"===w.key&&"ASC"===w.direction?"\u2191":"availability_zone"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("cost")},children:["Cost","cost"===w.key&&"ASC"===w.direction?"\u2191":"cost"===w.key&&"DESC"===w.direction?"\u2193":""]}),Object(y.jsxs)("th",{onClick:function(){return D("created")},children:["Created","created"===w.key&&"ASC"===w.direction?"\u2191":"created"===w.key&&"DESC"===w.direction?"\u2193":""]})]}),Object(y.jsx)("tbody",{children:t.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)("input",{className:"form-checkbox",type:"checkbox"})}),Object(y.jsx)("td",{children:Object(y.jsx)("a",{href:"/clouds/aws_cloud/".concat(e.cloud_context,"/instance/").concat(e.drupal_internal__id),target:"_blank",rel:"noopener noreferrer",children:e.name})}),Object(y.jsx)("td",{children:e.public_ip}),Object(y.jsx)("td",{children:e.instance_state}),Object(y.jsx)("td",{children:e.instance_type}),Object(y.jsx)("td",{children:e.availability_zone}),Object(y.jsx)("td",{children:null!==e.cost?"$".concat(e.cost):""}),Object(y.jsx)("td",{children:e.created})]},e.drupal_internal__id)}))})]})}),Object(y.jsx)("nav",{children:Object(y.jsxs)("ul",{className:"pagination",children:[Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#","aria-label":"\u6700\u521d\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){j(0)},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#","aria-label":"\u524d\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){j(Math.max(0,b-1))},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\uff1c"})})}),Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#",children:b+1})}),Object(y.jsx)("li",{className:K?"":"disabled",children:Object(y.jsx)("a",{href:"#","aria-label":"\u6b21\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){K&&j(b+1)},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\uff1e"})})}),Object(y.jsx)("li",{className:0!==m&&K?"":"disabled",children:Object(y.jsx)("a",{href:"#","aria-label":"\u6700\u5f8c\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){if(0!==m&&K){var e=Math.floor(1*(m+s-1)/s);j(e-1)}},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})]})})})},_=t(19),x=function(e,a){return"000000".concat(e).slice(-a)},k=function(e,a){for(var t=1,n=0;n<a;n+=1)t*=10;if(Math.floor(e)!==e)return"".concat(Math.round(e*t)/t);var c="".concat(e);if(0!==a){c+=".";for(var l=0;l<a;l+=1)c+="0"}return c},C=function(e){var a=e.cloudContext,t=e.setCloudContext,c=Object(n.useState)([]),l=Object(f.a)(c,2),s=l[0],r=l[1];return Object(n.useEffect)((function(){fetch("/jsonapi/cloud_config/k8s").then((function(e){return e.json()})).then((function(e){r(e.data.map((function(e){return e.attributes.cloud_context})))}))}),[]),Object(n.useEffect)((function(){!s.includes(a)&&s.length>=1&&t(s[0])}),[s]),Object(y.jsx)("select",{className:"form-select form-control",value:a,onChange:function(e){t(e.currentTarget.value)},children:s.map((function(e){return Object(y.jsx)("option",{value:e,children:e},e)}))})},g=function(e){var a=e.cloudContext,t=e.columnKey,c=e.columnName,l=e.setColumnName,s=Object(n.useState)([]),r=Object(f.a)(s,2),o=r[0],i=r[1];return Object(n.useEffect)((function(){var e="/jsonapi/k8s_".concat(t,"/k8s_").concat(t);""!==a&&(e+="?cloudContext=".concat(a)),fetch(e).then((function(e){return e.json()})).then((function(e){i(e.data.map((function(e){return e.attributes.name})))}))}),[a]),Object(y.jsxs)("select",{className:"form-select form-control",value:c,onChange:function(e){l(e.currentTarget.value)},children:[Object(y.jsx)("option",{value:"",children:"- \u3059\u3079\u3066 -"}),o.map((function(e){return Object(y.jsx)("option",{value:e,children:e},e)}))]})},v=function(e){var a=e.cloudContext,t=e.entityTypeId,c=e.namespace,l=e.namespaceName,s=e.itemCount,r=e.setItemCount;return Object(n.useEffect)((function(){if(""===a)r(0);else{var e="/cloud_dashboard/k8s/".concat(a,"/").concat(t,"/entity/count");""!==c&&(e+="?namespace=".concat(c)),""!==l&&(e+="?namespace_name=".concat(l)),fetch(e).then((function(e){return e.json()})).then((function(e){r(e.count)}))}}),[a,c,l]),Object(y.jsxs)("label",{className:"control-label",children:["Item Count: ",s]})},S=function(e){var a=e.entityTypeId,t=e.column,c=e.cloudContext,l=e.namespace,s=e.namespaceName,r=e.sortInfo,o=e.setSortInfo,i=e.pageIndex,m=Object(n.useState)([]),u=Object(f.a)(m,2),d=u[0],p=u[1],b=function(e,a){switch(a){case"datetime":return function(e){var a=new Date(e),t=a.getFullYear(),n=a.getMonth()+1,c=a.getDate(),l=a.getHours(),s=a.getMinutes(),r="".concat(t,"/").concat(x(n,2),"/").concat(x(c,2));return r+" - ".concat(x(l,2),":").concat(x(s,2))}(e);case"memory":return e>=1073741824?"".concat(k(e/1073741824,2),"Gi"):e>=1048576?"".concat(k(e/1048576,2),"Mi"):e>=1024?"".concat(k(e/1024,2),"Ki"):k(e,2);case"boolean":return e?"TRUE":"FALSE";case"key-value":var t,n=[],c=Object(_.a)(e);try{for(c.s();!(t=c.n()).done;){var l=t.value;n.push("".concat(l.item_key,":").concat(l.item_value))}}catch(s){c.e(s)}finally{c.f()}return n.join(", ");default:return e}};return Object(n.useEffect)((function(){var e="/jsonapi/".concat(a,"/").concat(a),t=[];t.push({key:"page[limit]",value:"".concat(30)}),t.push({key:"page[offset]",value:"".concat(30*i)}),""!==l&&t.push({key:"filter[namespace]",value:l}),""!==s&&t.push({key:"filter[namespace_name]",value:s}),""!==c&&t.push({key:"filter[cloud_context]",value:c}),""!==r.key&&t.push("ASC"===r.direction?{key:"sort",value:r.key}:{key:"sort",value:"-"+r.key}),t.length>0&&(e+="?"+t.map((function(e){return e.key+"="+e.value})).join("&")),fetch(e).then((function(e){return e.json()})).then((function(e){p(e.data)}))}),[l,s,c,r,i]),Object(y.jsxs)("table",{className:"table table-hover table-striped sticky-enabled sticky-table",children:[Object(y.jsxs)("thead",{children:[Object(y.jsx)("th",{children:Object(y.jsx)("input",{type:"checkbox",className:"form-checkbox",title:"\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u3059\u3079\u3066\u306e\u5217\u3092\u9078\u629e\u3059\u308b"})}),t.map((function(e){return Object(y.jsxs)("th",{onClick:function(){return a=e.name,void(r.key===a?"ASC"!==r.direction?o({key:"",direction:"ASC"}):o({key:a,direction:"DESC"}):o({key:a,direction:"ASC"}));var a},children:[e.labelName,r.key===e.name&&"ASC"===r.direction?"\u2191":r.key===e.name&&"DESC"===r.direction?"\u2193":""]},e.name)}))]}),Object(y.jsx)("tbody",{children:d.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:Object(y.jsx)("input",{className:"form-checkbox",type:"checkbox"})}),t.map((function(a){return Object(y.jsx)("td",{children:b(e.attributes[a.name],a.type)},a.name)}))]},e.id)}))})]})},w=function(e){var a=e.pageIndex,t=e.setPageIndex,n=e.itemCount,c=Math.floor(1*(n+30-1)/30);return Object(y.jsx)("nav",{children:Object(y.jsxs)("ul",{className:"pagination",children:[Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#","aria-label":"\u6700\u521d\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){t(0)},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#","aria-label":"\u524d\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){t(Math.max(0,a-1))},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\uff1c"})})}),Object(y.jsx)("li",{children:Object(y.jsx)("a",{href:"#",children:a+1})}),Object(y.jsx)("li",{className:a!==c-1?"":"disabled",children:Object(y.jsx)("a",{href:"#","aria-label":"\u6b21\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){t(Math.min(a+1,c-1))},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\uff1e"})})}),Object(y.jsx)("li",{className:0!==n&&a!==c-1?"":"disabled",children:Object(y.jsx)("a",{href:"#","aria-label":"\u6700\u5f8c\u306e\u30da\u30fc\u30b8\u3078",onClick:function(){t(c-1)},children:Object(y.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})},I=function(e){var a=e.entityTypeId,t=e.column,c=Object(n.useState)(""),l=Object(f.a)(c,2),s=l[0],r=l[1],o=Object(n.useState)(""),i=Object(f.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(f.a)(d,2),b=p[0],j=p[1],h=Object(n.useState)(0),N=Object(f.a)(h,2),O=N[0],_=N[1],x=Object(n.useState)({key:"",direction:"ASC"}),k=Object(f.a)(x,2),I=k[0],T=k[1],A=Object(n.useState)(0),K=Object(f.a)(A,2),E=K[0],D=K[1];Object(n.useEffect)((function(){""!==m&&j("")}),[m]),Object(n.useEffect)((function(){""!==b&&u("")}),[b]);var P=t.map((function(e){return e.labelName})).includes("Namespace"),z=t.map((function(e){return e.labelName})).includes("Namespace Name");return Object(y.jsx)("div",{className:"row",style:{marginTop:"2rem"},children:Object(y.jsx)("div",{className:"col",children:Object(y.jsxs)("form",{children:[Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"control-label",children:"Cloud context"}),Object(y.jsx)(C,{cloudContext:s,setCloudContext:r})]}),P?Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"control-label",children:"Namespace"}),Object(y.jsx)(g,{cloudContext:s,columnKey:"namespace",columnName:m,setColumnName:u})]}):Object(y.jsx)(y.Fragment,{}),z?Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"control-label",children:"Namespace Name"}),Object(y.jsx)(g,{cloudContext:s,columnKey:"namespace_name",columnName:b,setColumnName:j})]}):Object(y.jsx)(y.Fragment,{}),Object(y.jsx)("div",{className:"form-group",children:Object(y.jsx)(v,{cloudContext:s,entityTypeId:a,namespace:m,namespaceName:b,itemCount:O,setItemCount:_})}),Object(y.jsx)("div",{className:"table-responsive",children:Object(y.jsx)(S,{entityTypeId:a,column:t,cloudContext:s,namespace:m,namespaceName:b,sortInfo:I,setSortInfo:T,pageIndex:E})}),Object(y.jsx)(w,{pageIndex:E,setPageIndex:D,itemCount:O})]})})})},T=function(){return Object(y.jsx)(r.a,{basename:i,children:Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"/aws_cloud/instance",children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(N,{menuType:"AWS",menuName:"Cloud instance"}),Object(y.jsx)(O,{})]})}),Object(y.jsx)(o.a,{exact:!0,path:"/callback",children:Object(y.jsx)("div",{className:"container",children:Object(y.jsx)(j,{})})}),u.map((function(e){return Object(y.jsx)(o.a,{exact:!0,path:e.url,children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(N,{menuType:"K8s",menuName:e.name}),Object(y.jsx)(I,{entityTypeId:e.entityTypeId,column:e.column})]})},e.name)})),Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)("div",{className:"container",children:Object(y.jsx)(h,{})})})]})})},A=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,34)).then((function(a){var t=a.getCLS,n=a.getFID,c=a.getFCP,l=a.getLCP,s=a.getTTFB;t(e),n(e),c(e),l(e),s(e)}))};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(T,{})}),document.getElementById("root")),A()}},[[33,1,2]]]);
//# sourceMappingURL=main.2bdf5ea6.chunk.js.map